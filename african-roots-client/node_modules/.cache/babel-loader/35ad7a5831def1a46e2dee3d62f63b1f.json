{"ast":null,"code":"import _classCallCheck from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/Billing&OrderList/NewOrderTab.js\";\n//Tab For Creating a New Order\nimport React from 'react';\nimport QrReader from 'react-qr-reader';\nimport axios from \"axios\";\nimport RecieptMenuItem from '../../ClientUI/Menu/RecieptMenuItem';\n\nvar NewOrderTab =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewOrderTab, _React$Component);\n\n  function NewOrderTab(props) {\n    var _this;\n\n    _classCallCheck(this, NewOrderTab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewOrderTab).call(this, props));\n\n    _this.handleScan = function (data) {\n      if (data) {\n        var payOrder = _this._searchOrders(data, _this.state.orderData);\n\n        if (payOrder != null) {\n          _this.setState({\n            payOrder: payOrder,\n            show: \"receipt\"\n          });\n        } else {\n          console.log(\"order does not exist\");\n        }\n      }\n    };\n\n    _this.handleError = function (err) {\n      console.error(err);\n    };\n\n    _this.handleShowReceipt = _this.handleShowReceipt.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCompletePurchase = _this.handleCompletePurchase.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      show: \"default\",\n      payOrder: {},\n      orderData: [],\n      orderTotal: 10\n    };\n    return _this;\n  }\n\n  _createClass(NewOrderTab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getOrderData();\n\n      this._getMealData();\n    }\n  }, {\n    key: \"_getOrderData\",\n    value: function _getOrderData() {\n      var _this2 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/orders';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this2.setState({\n          orderData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"_getMealData\",\n    value: function _getMealData() {\n      var _this3 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/meals';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this3.setState({\n          mealData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"handleShowReceipt\",\n    value: function handleShowReceipt() {\n      this.setState({\n        show: \"scan\"\n      });\n    }\n  }, {\n    key: \"handleCompletePurchase\",\n    value: function handleCompletePurchase() {\n      this.setState({\n        show: \"default\"\n      });\n    }\n  }, {\n    key: \"_searchOrders\",\n    value: function _searchOrders(scannedQR, orderData) {\n      var order = null;\n\n      for (var i = 0; i < orderData.length; i++) {\n        if (orderData[i].order_number === scannedQR) {\n          order = orderData[i];\n        }\n      }\n\n      return order;\n    }\n  }, {\n    key: \"_searchMeals\",\n    value: function _searchMeals(mealID, mealData, isTotal) {\n      var meals = [];\n      var orderTotal = 0;\n\n      for (var i = 0; i < mealData.length; i++) {\n        if (Array.isArray(mealID)) {\n          for (var j = 0; j < mealID.length; j++) {\n            if (mealData[i]._id === mealID[j]) {\n              meals.push(mealData[i]);\n              orderTotal = orderTotal + mealData[i].price_id;\n            }\n          }\n        } else if (mealData[i]._id === mealID) {\n          meals.push(mealData[i]);\n        }\n      }\n\n      console.log(orderTotal);\n\n      if (isTotal) {}\n\n      return meals;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var show = this.state.show;\n      var order = this.state.payOrder;\n      var view;\n\n      if (show == \"default\") {\n        view = React.createElement(\"div\", {\n          className: \"row NewOrderRow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 ml-auto employeeItemnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"employeeItem\",\n          onClick: this.handleShowReceipt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-qrcode d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"text-center employeeItemName\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, \"Scan QR Code\"))), React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 mr-auto employeeItemnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"employeeItem\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"la la-i-cursor d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"text-center employeeItemName\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Enter Order No\"))));\n      } else if (show == \"scan\") {\n        view = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(QrReader, {\n          delay: 300,\n          onError: this.handleError,\n          onScan: this.handleScan,\n          style: {\n            width: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, this.state.result));\n      } else if (show == \"receipt\") {\n        view = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row BillingRecieptRow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-12 col-sm-8 col-lg-6 col-xl-4 mx-auto receiptsCard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"User Name\"), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto FoodPriceLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, order.order_number)), React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex totalReceiptCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"receiptTimestamp\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"02 March 2019\"), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto receiptTimestamp\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, \"10:05\"))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, this.__showMenuItem(), React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex totalReceiptCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"FoodNameLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \"Total\"), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto FoodPriceLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, this.state.orderTotal))))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col BillingRecieptPaymentCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \"Payment\"))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex ml-auto PaymentBtnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark btn-lg btnPayType\",\n          type: \"button\",\n          onClick: this.handleCompletePurchase,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"icon ion-cash greenIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }), \"Cash\")), React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex mr-auto PaymentBtnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark btn-lg btnPayType\",\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"icon ion-card greenIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }), \"Card\"))));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"tab-pane active\",\n        role: \"tabpanel\",\n        id: \"tab-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, view);\n    }\n  }, {\n    key: \"__showMenuItem\",\n    value: function __showMenuItem() {\n      var meals = this._searchMeals(this.state.payOrder.meal_id, this.state.mealData);\n\n      if (meals.length > 0) {\n        return meals.map(function (meal) {\n          return React.createElement(RecieptMenuItem, {\n            key: meal._id,\n            name: meal.name,\n            price: meal.price,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          });\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return NewOrderTab;\n}(React.Component);\n\nexport default NewOrderTab;","map":{"version":3,"sources":["/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/Billing&OrderList/NewOrderTab.js"],"names":["React","QrReader","axios","RecieptMenuItem","NewOrderTab","props","handleScan","data","payOrder","_searchOrders","state","orderData","setState","show","console","log","handleError","err","error","handleShowReceipt","bind","handleCompletePurchase","orderTotal","_getOrderData","_getMealData","url","method","mode","headers","withCredentials","credentials","then","response","mealData","scannedQR","order","i","length","order_number","mealID","isTotal","meals","Array","isArray","j","_id","push","price_id","view","width","result","__showMenuItem","_searchMeals","meal_id","map","meal","name","price","Component"],"mappings":"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","sourcesContent":["//Tab For Creating a New Order\n\nimport React from 'react'\nimport QrReader from 'react-qr-reader'\nimport axios from \"axios\";\nimport RecieptMenuItem from '../../ClientUI/Menu/RecieptMenuItem';\n\nclass NewOrderTab extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleShowReceipt = this.handleShowReceipt.bind(this);\n        this.handleCompletePurchase = this.handleCompletePurchase.bind(this);\n        this.state = {show: \"default\",\n                      payOrder: {},\n                      orderData: [],\n                      orderTotal: 10};\n      }\n\n      componentDidMount() {\n        this._getOrderData();\n        this._getMealData();\n      }\n\n      _getOrderData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/orders';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n                orderData: response.data\n            });\n          })\n      }\n\n\n    _getMealData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/meals';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n              mealData: response.data\n            });\n          })\n      }\n    \n      handleShowReceipt() {\n        this.setState({show: \"scan\"});\n      }\n\n      handleCompletePurchase() {\n        this.setState({show: \"default\"});\n      }\n\n      handleScan = data => {\n        if (data) {\n            let payOrder= this._searchOrders(data,this.state.orderData);\n            if(payOrder != null){\n                this.setState({\n                    payOrder: payOrder,\n                    show: \"receipt\"\n                })\n            } else {\n                console.log(\"order does not exist\")\n            }\n        }\n      }\n      handleError = err => {\n        console.error(err)\n      }\n\n      _searchOrders(scannedQR, orderData){\n        let order= null;\n        for (var i=0; i < orderData.length; i++) {\n            if (orderData[i].order_number === scannedQR) {\n                order = orderData[i]\n            } \n        }\n\n        return order;\n      }\n\n      _searchMeals(mealID, mealData, isTotal){\n        let meals= [];\n        let orderTotal = 0;\n        for (var i=0; i < mealData.length; i++) {\n            if (Array.isArray(mealID)) {\n                for (var j=0; j < mealID.length; j++) {\n                    if (mealData[i]._id === mealID[j]) {\n                        meals.push(mealData[i]);\n                        orderTotal = orderTotal + mealData[i].price_id;\n                    }\n                }\n            }\n            else if (mealData[i]._id === mealID) {\n                meals.push(mealData[i])\n            } \n        }\n\n\n        console.log(orderTotal);\n        if(isTotal){\n            \n        }\n        return meals;\n      }\n\n\n    render() {\n        const show = this.state.show;\n        const order = this.state.payOrder;\n        let view;\n\n        if (show == \"default\") {\n            view = \n            <div className=\"row NewOrderRow\">\n                <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 ml-auto employeeItemnCol\">\n                    <div className=\"employeeItem\" onClick={this.handleShowReceipt}><i className=\"fa fa-qrcode d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\"></i>\n                        <p className=\"text-center employeeItemName\">Scan QR Code</p>\n                    </div>\n                </div>\n                <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 mr-auto employeeItemnCol\">\n                    <div className=\"employeeItem\"><i className=\"la la-i-cursor d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\"></i>\n                        <p className=\"text-center employeeItemName\">Enter Order No</p>\n                    </div>\n                </div>\n            </div>;\n        } else if (show == \"scan\") {\n            view = \n            <div>\n            <QrReader\n              delay={300}\n              onError={this.handleError}\n              onScan={this.handleScan}\n              style={{ width: '100%' }}\n            />\n            <p>{this.state.result}</p>\n            </div>\n\n        } else if (show == \"receipt\") {\n            view = \n            <div>\n                <div className=\"row BillingRecieptRow\">\n                    <div className=\"col-12 col-sm-8 col-lg-6 col-xl-4 mx-auto receiptsCard\">\n                        <div className=\"row\">\n                            <div className=\"col-12 d-inline-flex\">\n                                <p>User Name</p>\n                                <p className=\"d-xl-flex ml-auto FoodPriceLabelReceipt\">{order.order_number}</p>\n                            </div>\n                            <div className=\"col-12 d-inline-flex totalReceiptCol\">\n                                <p className=\"receiptTimestamp\">02 March 2019</p>\n                                <p className=\"d-xl-flex ml-auto receiptTimestamp\">10:05</p>\n                            </div>\n                        </div>\n                        <div className=\"row\">\n                            {/* Billing Receipt Menu Item */}\n                            {this.__showMenuItem()}\n                            {/* /Billing Receipt Menu Item */}\n                            <div className=\"col-12 d-inline-flex totalReceiptCol\">\n                                <p className=\"FoodNameLabelReceipt\">Total</p>\n                                <p className=\"d-xl-flex ml-auto FoodPriceLabelReceipt\">{this.state.orderTotal}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col BillingRecieptPaymentCol\">\n                        <h6 className=\"text-center\">Payment</h6>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex ml-auto PaymentBtnCol\"><button className=\"btn btn-dark btn-lg btnPayType\" type=\"button\" onClick={this.handleCompletePurchase}><i className=\"icon ion-cash greenIcon\"></i>Cash</button></div>\n                    <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex mr-auto PaymentBtnCol\"><button className=\"btn btn-dark btn-lg btnPayType\" type=\"button\" ><i className=\"icon ion-card greenIcon\"></i>Card</button></div>\n                </div>\n            </div>\n        }\n        return (\n            <div className=\"tab-pane active\" role=\"tabpanel\" id=\"tab-1\">\n                {/* Shows once an order item has been scanned/entered */}\n                {view}\n            </div>\n            )\n    }\n\n\n    __showMenuItem() {\n        let meals = this._searchMeals(this.state.payOrder.meal_id,this.state.mealData);\n        if (meals.length > 0) {\n        return meals.map(meal => {\n            return (\n                <RecieptMenuItem\n                key={meal._id}\n                name={meal.name}\n                price={meal.price}\n                />\n            );\n        });\n        } else {\n        return null;\n        }\n    }\n} \n\nexport default NewOrderTab"]},"metadata":{},"sourceType":"module"}