{"ast":null,"code":"import _classCallCheck from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/Billing&OrderList/NewOrderTab.js\";\n//Tab For Creating a New Order\nimport React from 'react';\nimport QrReader from 'react-qr-reader';\nimport axios from \"axios\";\nimport RecieptMenuItem from '../../ClientUI/Menu/RecieptMenuItem';\n\nvar NewOrderTab =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewOrderTab, _React$Component);\n\n  function NewOrderTab(props) {\n    var _this;\n\n    _classCallCheck(this, NewOrderTab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewOrderTab).call(this, props));\n\n    _this.handleScan = function (data) {\n      if (data) {\n        var payOrder = _this._searchOrders(data, _this.state.orderData);\n\n        if (payOrder != null) {\n          _this.setState({\n            payOrder: payOrder,\n            show: \"receipt\"\n          });\n        } else {\n          console.log(\"order does not exist\");\n        }\n      }\n    };\n\n    _this.handleError = function (err) {\n      console.error(err);\n    };\n\n    _this.handleShowReceipt = _this.handleShowReceipt.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCompletePurchase = _this.handleCompletePurchase.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCompletePay = _this.handleCompletePay.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      show: \"default\",\n      payOrder: {},\n      orderData: []\n    };\n    return _this;\n  }\n\n  _createClass(NewOrderTab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getOrderData();\n\n      this._getMealData();\n    }\n  }, {\n    key: \"_getOrderData\",\n    value: function _getOrderData() {\n      var _this2 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/orders';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this2.setState({\n          orderData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"_getMealData\",\n    value: function _getMealData() {\n      var _this3 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/meals';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this3.setState({\n          mealData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"handleShowReceipt\",\n    value: function handleShowReceipt() {\n      this.setState({\n        show: \"scan\"\n      });\n    }\n  }, {\n    key: \"handleCompletePay\",\n    value: function handleCompletePay() {\n      this.setState({\n        show: \"pay\"\n      });\n    }\n  }, {\n    key: \"handleCompletePurchase\",\n    value: function handleCompletePurchase() {\n      this.setState({\n        show: \"default\"\n      });\n    }\n  }, {\n    key: \"_searchOrders\",\n    value: function _searchOrders(scannedQR, orderData) {\n      var order = null;\n\n      for (var i = 0; i < orderData.length; i++) {\n        if (orderData[i].order_number === scannedQR) {\n          order = orderData[i];\n        }\n      }\n\n      return order;\n    }\n  }, {\n    key: \"_searchMeals\",\n    value: function _searchMeals(mealID, mealData, isTotal) {\n      var meals = [];\n      var orderTotal = 0;\n\n      for (var i = 0; i < mealData.length; i++) {\n        if (Array.isArray(mealID)) {\n          for (var j = 0; j < mealID.length; j++) {\n            if (mealData[i]._id === mealID[j]) {\n              meals.push(mealData[i]);\n              orderTotal = orderTotal + mealData[i].price_id;\n            }\n          }\n        } else if (mealData[i]._id === mealID) {\n          meals.push(mealData[i]);\n        }\n      }\n\n      console.log(orderTotal);\n\n      if (isTotal) {\n        return orderTotal;\n      } else {\n        return meals;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var show = this.state.show;\n      var order = this.state.payOrder;\n      var view;\n\n      if (show == \"default\") {\n        view = React.createElement(\"div\", {\n          className: \"row NewOrderRow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 ml-auto employeeItemnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"employeeItem\",\n          onClick: this.handleShowReceipt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-qrcode d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"text-center employeeItemName\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"Scan QR Code\"))), React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 mr-auto employeeItemnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"employeeItem\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"la la-i-cursor d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"text-center employeeItemName\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Enter Order No\"))));\n      } else if (show == \"scan\") {\n        view = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(QrReader, {\n          delay: 300,\n          onError: this.handleError,\n          onScan: this.handleScan,\n          style: {\n            width: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, this.state.result));\n      } else if (show == \"receipt\") {\n        view = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row BillingRecieptRow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-12 col-sm-8 col-lg-6 col-xl-4 mx-auto receiptsCard\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, order.user_name), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto FoodPriceLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, order.order_number)), React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex totalReceiptCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"receiptTimestamp\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, \"02 March 2019\"), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto receiptTimestamp\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"10:05\"))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, this.__showMenuItem(), React.createElement(\"div\", {\n          className: \"col-12 d-inline-flex totalReceiptCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"FoodNameLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, \"Total\"), React.createElement(\"p\", {\n          className: \"d-xl-flex ml-auto FoodPriceLabelReceipt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"R \", this._searchMeals(this.state.payOrder.meal_id, this.state.mealData, true), \".00\"))))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col BillingRecieptPaymentCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, \"Payment\"))), React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex ml-auto PaymentBtnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark btn-lg btnPayType\",\n          type: \"button\",\n          onClick: this.handleCompletePay,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"icon ion-cash greenIcon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }), \"Cash\")), React.createElement(\"div\", {\n          className: \"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex mr-auto PaymentBtnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark btn-lg btnPayType\",\n          type: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"icon ion-card greenIcon\",\n          onClick: this.handleCompletePay,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }), \"Card\"))));\n      } else if (show == \"pay\") {\n        view = React.createElement(\"div\", {\n          role: \"dialog\",\n          tabindex: \"-1\",\n          class: \"modal fade show\",\n          style: \"display: block;\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-dialog modal-dialog-centered\",\n          role: \"document\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-header\",\n          style: \"background-color: #f6f6f6;\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          class: \"modal-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, \"PAYMENT\"), React.createElement(\"button\", {\n          type: \"button\",\n          class: \"close\",\n          \"data-dismiss\": \"modal\",\n          \"aria-label\": \"Close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, \"\\xD7\"))), React.createElement(\"div\", {\n          class: \"modal-body\",\n          style: \"padding: 0px;background-color: #f6f6f6;\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"IMG_0694.gif\",\n          width: \"100%\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          class: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"col-10 col-sm-8 d-xl-flex mx-auto PaymentBtnCol\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          class: \"btn btn-dark btn-lg btnAction\",\n          type: \"button\",\n          onClick: this.handleCompletePurchase,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, \"Payment Complete\")))))));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"tab-pane active\",\n        role: \"tabpanel\",\n        id: \"tab-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, view);\n    }\n  }, {\n    key: \"__showMenuItem\",\n    value: function __showMenuItem() {\n      var meals = this._searchMeals(this.state.payOrder.meal_id, this.state.mealData, false);\n\n      if (meals.length > 0) {\n        return meals.map(function (meal) {\n          return React.createElement(RecieptMenuItem, {\n            key: meal._id,\n            name: meal.name,\n            price: meal.price_id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229\n            },\n            __self: this\n          });\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return NewOrderTab;\n}(React.Component);\n\nexport default NewOrderTab;","map":{"version":3,"sources":["/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/Billing&OrderList/NewOrderTab.js"],"names":["React","QrReader","axios","RecieptMenuItem","NewOrderTab","props","handleScan","data","payOrder","_searchOrders","state","orderData","setState","show","console","log","handleError","err","error","handleShowReceipt","bind","handleCompletePurchase","handleCompletePay","_getOrderData","_getMealData","url","method","mode","headers","withCredentials","credentials","then","response","mealData","scannedQR","order","i","length","order_number","mealID","isTotal","meals","orderTotal","Array","isArray","j","_id","push","price_id","view","width","result","user_name","__showMenuItem","_searchMeals","meal_id","map","meal","name","Component"],"mappings":"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","sourcesContent":["//Tab For Creating a New Order\n\nimport React from 'react'\nimport QrReader from 'react-qr-reader'\nimport axios from \"axios\";\nimport RecieptMenuItem from '../../ClientUI/Menu/RecieptMenuItem';\n\nclass NewOrderTab extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleShowReceipt = this.handleShowReceipt.bind(this);\n        this.handleCompletePurchase = this.handleCompletePurchase.bind(this);\n        this.handleCompletePay = this.handleCompletePay.bind(this);\n        this.state = {show: \"default\",\n                      payOrder: {},\n                      orderData: []};\n      }\n\n      componentDidMount() {\n        this._getOrderData();\n        this._getMealData();\n      }\n\n      _getOrderData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/orders';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n                orderData: response.data\n            });\n          })\n      }\n\n\n    _getMealData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/meals';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n              mealData: response.data\n            });\n          })\n      }\n    \n      handleShowReceipt() {\n        this.setState({show: \"scan\"});\n      }\n\n      handleCompletePay() {\n        this.setState({show: \"pay\"});\n      }\n\n      handleCompletePurchase() {\n        this.setState({show: \"default\"});\n      }\n\n      handleScan = data => {\n        if (data) {\n            let payOrder= this._searchOrders(data,this.state.orderData);\n            if(payOrder != null){\n                this.setState({\n                    payOrder: payOrder,\n                    show: \"receipt\"\n                })\n            } else {\n                console.log(\"order does not exist\")\n            }\n        }\n      }\n      handleError = err => {\n        console.error(err)\n      }\n\n      _searchOrders(scannedQR, orderData){\n        let order= null;\n        for (var i=0; i < orderData.length; i++) {\n            if (orderData[i].order_number === scannedQR) {\n                order = orderData[i]\n            } \n        }\n\n        return order;\n      }\n\n      _searchMeals(mealID, mealData, isTotal){\n        let meals= [];\n        let orderTotal = 0;\n        for (var i=0; i < mealData.length; i++) {\n            if (Array.isArray(mealID)) {\n                for (var j=0; j < mealID.length; j++) {\n                    if (mealData[i]._id === mealID[j]) {\n                        meals.push(mealData[i]);\n                        orderTotal = orderTotal + mealData[i].price_id;\n                    }\n                }\n            }\n            else if (mealData[i]._id === mealID) {\n                meals.push(mealData[i])\n            } \n        }\n\n\n        console.log(orderTotal);\n        if(isTotal){\n            return orderTotal;\n        } else {\n            return meals;\n        }\n\n      }\n\n\n    render() {\n        const show = this.state.show;\n        const order = this.state.payOrder;\n        let view;\n\n        if (show == \"default\") {\n            view = \n            <div className=\"row NewOrderRow\">\n                <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 ml-auto employeeItemnCol\">\n                    <div className=\"employeeItem\" onClick={this.handleShowReceipt}><i className=\"fa fa-qrcode d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\"></i>\n                        <p className=\"text-center employeeItemName\">Scan QR Code</p>\n                    </div>\n                </div>\n                <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 mr-auto employeeItemnCol\">\n                    <div className=\"employeeItem\"><i className=\"la la-i-cursor d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center SelectOrderRowIcon\"></i>\n                        <p className=\"text-center employeeItemName\">Enter Order No</p>\n                    </div>\n                </div>\n            </div>;\n        } else if (show == \"scan\") {\n            view = \n            <div>\n            <QrReader\n              delay={300}\n              onError={this.handleError}\n              onScan={this.handleScan}\n              style={{ width: '100%' }}\n            />\n            <p>{this.state.result}</p>\n            </div>\n\n        } else if (show == \"receipt\") {\n            view = \n            <div>\n                <div className=\"row BillingRecieptRow\">\n                    <div className=\"col-12 col-sm-8 col-lg-6 col-xl-4 mx-auto receiptsCard\">\n                        <div className=\"row\">\n                            <div className=\"col-12 d-inline-flex\">\n                                <p>{order.user_name}</p>\n                                <p className=\"d-xl-flex ml-auto FoodPriceLabelReceipt\">{order.order_number}</p>\n                            </div>\n                            <div className=\"col-12 d-inline-flex totalReceiptCol\">\n                                <p className=\"receiptTimestamp\">02 March 2019</p>\n                                <p className=\"d-xl-flex ml-auto receiptTimestamp\">10:05</p>\n                            </div>\n                        </div>\n                        <div className=\"row\">\n                            {/* Billing Receipt Menu Item */}\n                            {this.__showMenuItem()}\n                            {/* /Billing Receipt Menu Item */}\n                            <div className=\"col-12 d-inline-flex totalReceiptCol\">\n                                <p className=\"FoodNameLabelReceipt\">Total</p>\n                                <p className=\"d-xl-flex ml-auto FoodPriceLabelReceipt\">R {this._searchMeals(this.state.payOrder.meal_id,this.state.mealData, true)}.00</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col BillingRecieptPaymentCol\">\n                        <h6 className=\"text-center\">Payment</h6>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex ml-auto PaymentBtnCol\"><button className=\"btn btn-dark btn-lg btnPayType\" type=\"button\" onClick={this.handleCompletePay}><i className=\"icon ion-cash greenIcon\"></i>Cash</button></div>\n                    <div className=\"col-6 col-sm-4 col-lg-3 col-xl-2 d-xl-flex mr-auto PaymentBtnCol\"><button className=\"btn btn-dark btn-lg btnPayType\" type=\"button\" ><i className=\"icon ion-card greenIcon\" onClick={this.handleCompletePay}></i>Card</button></div>\n                </div>\n            </div>\n        } else if (show == \"pay\") {\n            view = \n            <div role=\"dialog\" tabindex=\"-1\" class=\"modal fade show\" style=\"display: block;\">\n                <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\" style=\"background-color: #f6f6f6;\">\n                            <h4 class=\"modal-title\">PAYMENT</h4><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button></div>\n                        <div class=\"modal-body\" style=\"padding: 0px;background-color: #f6f6f6;\">\n                            <div class=\"row\">\n                                <div class=\"col\"><img src=\"IMG_0694.gif\" width=\"100%\" /></div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-10 col-sm-8 d-xl-flex mx-auto PaymentBtnCol\"><button class=\"btn btn-dark btn-lg btnAction\" type=\"button\" onClick={this.handleCompletePurchase}>Payment Complete</button></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        }\n        return (\n            <div className=\"tab-pane active\" role=\"tabpanel\" id=\"tab-1\">\n                {/* Shows once an order item has been scanned/entered */}\n                {view}\n            </div>\n            )\n    }\n\n\n    __showMenuItem() {\n        let meals = this._searchMeals(this.state.payOrder.meal_id,this.state.mealData, false);\n        if (meals.length > 0) {\n        return meals.map(meal => {\n            return (\n                <RecieptMenuItem\n                key={meal._id}\n                name={meal.name}\n                price={meal.price_id}\n                />\n            );\n        });\n        } else {\n        return null;\n        }\n    }\n} \n\nexport default NewOrderTab"]},"metadata":{},"sourceType":"module"}