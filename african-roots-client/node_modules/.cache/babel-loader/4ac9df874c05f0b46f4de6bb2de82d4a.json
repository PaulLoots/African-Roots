{"ast":null,"code":"import _classCallCheck from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/AdminDashboard/Dashboard.js\";\n//Component for Admin Dashboard\nimport React from 'react';\nimport ProfitsChart from './profits';\nimport OrdersChart from './orders';\nimport CustomersChart from './customers';\nimport SalesChart from './sales';\nimport axios from \"axios\";\nimport SeasonalFoods from './SeasonalFoods'; // import './data.js'\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props));\n    _this.state = {\n      orderData: [],\n      mealData: [],\n      salesChartData: {},\n      profitsChartData: {},\n      customerChartData: {}\n    };\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this._getOrderData();\n\n      this._getMealData();\n\n      this._getSalesChartData();\n\n      this._getProfitsChartData();\n\n      this._getCustomerChartData(); // this._getCustomerCount();\n      // this._getOrderCount();\n\n    }\n  }, {\n    key: \"_getOrderData\",\n    value: function _getOrderData() {\n      var _this2 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/orders';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this2.setState({\n          orderData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"_getMealData\",\n    value: function _getMealData() {\n      var _this3 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/meals';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this3.setState({\n          mealData: response.data\n        });\n      });\n    }\n  }, {\n    key: \"_generateOrderChartData\",\n    value: function _generateOrderChartData(orderData, mealData) {\n      var breakfast = this._getOrderChartCatagoryAmount(orderData, mealData, \"Breakfasts\");\n\n      var lightMeal = this._getOrderChartCatagoryAmount(orderData, mealData, \"Light meals\");\n\n      var drink = this._getOrderChartCatagoryAmount(orderData, mealData, \"Drinks\");\n\n      var dessert = this._getOrderChartCatagoryAmount(orderData, mealData, \"Desserts\");\n\n      return {\n        label: [\"Beakfasts\", \"Light Meals\", \"Drinks\", \"Desserts\"],\n        amount: [breakfast.amount, lightMeal.amount, drink.amount, dessert.amount],\n        price: [breakfast.price, lightMeal.price, drink.price, dessert.price],\n        colour: ['#D1E902', '#B4CF23', '#D6D6D6', '#F5F5F5']\n      };\n    }\n  }, {\n    key: \"_getOrderChartCatagoryAmount\",\n    // _getCustomerCount(orderData) {\n    //     let current = null;\n    //     let count = 0;\n    //     for (var i=0; i < orderData.length; i++) {\n    //         if (Array.isArray(orderData[i].user_id)) {\n    //             if (orderData[i].user_id != current) {\n    //                 if (count > 0) {\n    //                     document.write(current + ' comes --> ' + count + ' times<br>');\n    //                 }\n    //                 current = orderData[i];\n    //                 count = 1;\n    //             } else {\n    //                 count++;\n    //             }\n    //         }\n    //     }\n    //     if (count > 0) {\n    //         document.write(current + ' comes --> ' + count + ' times');\n    //     }\n    // }\n    // _getOrderCount(orderData) {\n    //     let current = null;\n    //     let count = 0;\n    //     for (var i=0; i < orderData.length; i++) {\n    //         if (Array.isArray(orderData[i].created_at)) {\n    //             if (orderData[i].created_at != current) {\n    //                 if (count > 0) {\n    //                     document.write(current + ' comes --> ' + count + ' times<br>');\n    //                 }\n    //                 current = orderData[i].created_at;\n    //                 count = 1;\n    //             } else {\n    //                 count++;\n    //             }\n    //         }\n    //     }\n    //     if (count > 0) {\n    //         document.write(current + ' comes --> ' + count + ' times');\n    //     }\n    // }\n    value: function _getOrderChartCatagoryAmount(orderData, mealData, key) {\n      var data = {\n        amount: 0,\n        price: 0\n      };\n\n      for (var i = 0; i < orderData.length; i++) {\n        if (Array.isArray(orderData[i].meal_id)) {\n          for (var j = 0; j < orderData[i].meal_id.length; j++) {\n            for (var k = 0; k < mealData.length; k++) {\n              if (mealData[k]._id === orderData[i].meal_id[j]) {\n                if (mealData[k].category === key) {\n                  data.amount = data.amount + 1;\n                  data.price = data.price + mealData[k].price_id;\n                  console.log();\n                }\n              }\n            }\n          }\n        } else {\n          for (var k = 0; k < mealData.length; k++) {\n            if (mealData[k]._id === orderData[i].meal_id) {\n              if (mealData[k].category === key) {\n                data.amount = data.amount + 1;\n                data.price = data.price + mealData[k].price_id;\n              }\n            }\n          }\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"_getSalesChartData\",\n    value: function _getSalesChartData() {\n      //AJAX CALL\n      this.setState({\n        salesChartData: {\n          labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],\n          datasets: [{\n            label: 'Daily Sales',\n            data: [5, 10, 4, 9, 15, 6, 8],\n            backgroundColor: ['#D1E902', '#B4CF23', '#D6D6D6', '#F5F5F5', '#D1E902', '#B4CF23', '#D6D6D6']\n          }],\n          options: {\n            legend: {\n              display: false\n            },\n            layout: {\n              padding: {\n                top: 15,\n                bottom: 20\n              }\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_getCustomerChartData\",\n    value: function _getCustomerChartData() {\n      //AJAX CALL\n      this.setState({\n        customerChartData: {\n          labels: ['New', 'Returning'],\n          datasets: [{\n            data: [4, 7],\n            backgroundColor: ['#D1E902', '#B4CF23']\n          }],\n          options: {\n            legend: {\n              display: false\n            },\n            layout: {\n              padding: {\n                top: 15,\n                bottom: 20\n              }\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_getProfitsChartData\",\n    value: function _getProfitsChartData() {\n      //AJAX CALL\n      this.setState({\n        profitsChartData: {\n          labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],\n          datasets: [{\n            data: [800, 900, 1200, 750, 700, 1300, 1760],\n            backgroundColor: ['#D1E902', '#B4CF23', '#D6D6D6', '#F5F5F5', '#D1E902', '#B4CF23', '#D6D6D6']\n          }],\n          options: {\n            legend: {\n              display: false\n            },\n            layout: {\n              padding: {\n                top: 15,\n                bottom: 20\n              }\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"tab-pane active\",\n        role: \"tabpanel\",\n        id: \"tab-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-md-7 col-lg-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-lg-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(ProfitsChart, {\n        profitsChartData: this.state.profitsChartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-12 col-lg-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, this.__showOrdersChart()), React.createElement(\"div\", {\n        className: \"col-12 col-lg-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(CustomersChart, {\n        customerChartData: this.state.customerChartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-12 col-lg-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(SalesChart, {\n        salesChartData: this.state.salesChartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"chartContainer inSeason\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"chartHeadingSmall\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"INGREDIENTS\"), React.createElement(\"h5\", {\n        className: \"chartHeading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"What's in season\")), React.createElement(\"div\", {\n        className: \"col inSeasonCol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(React.Fragment, null, React.createElement(SeasonalFoods, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      })))))));\n    }\n  }, {\n    key: \"__showOrdersChart\",\n    value: function __showOrdersChart() {\n      var orderChartData = this._generateOrderChartData(this.state.orderData, this.state.mealData);\n\n      console.log(orderChartData.amount);\n\n      if (this.state.mealData.length > 0) {\n        return React.createElement(OrdersChart, {\n          key: orderChartData.label,\n          labels: orderChartData.label,\n          data: orderChartData.amount,\n          prices: orderChartData.price,\n          colours: orderChartData.colour,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return Dashboard;\n}(React.Component);\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/AdminUI/AdminDashboard/Dashboard.js"],"names":["React","ProfitsChart","OrdersChart","CustomersChart","SalesChart","axios","SeasonalFoods","Dashboard","props","state","orderData","mealData","salesChartData","profitsChartData","customerChartData","_getOrderData","_getMealData","_getSalesChartData","_getProfitsChartData","_getCustomerChartData","url","method","mode","headers","withCredentials","credentials","then","response","setState","data","breakfast","_getOrderChartCatagoryAmount","lightMeal","drink","dessert","label","amount","price","colour","key","i","length","Array","isArray","meal_id","j","k","_id","category","price_id","console","log","labels","datasets","backgroundColor","options","legend","display","layout","padding","top","bottom","__showOrdersChart","orderChartData","_generateOrderChartData","Component"],"mappings":"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","sourcesContent":["//Component for Admin Dashboard\n\nimport React from 'react'\nimport ProfitsChart from './profits';\nimport OrdersChart from './orders';\nimport CustomersChart from './customers';\nimport SalesChart from './sales';\nimport axios from \"axios\";\nimport SeasonalFoods from './SeasonalFoods';\n// import './data.js'\n\nclass Dashboard extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state =  {\n            orderData: [],\n            mealData: [],\n            salesChartData: {},\n            profitsChartData: {},\n            customerChartData: {}\n        };\n    }\n\n    componentWillMount() {\n        this._getOrderData();\n        this._getMealData();\n        this._getSalesChartData();\n        this._getProfitsChartData();\n        this._getCustomerChartData();\n        // this._getCustomerCount();\n        // this._getOrderCount();\n    }\n\n    _getOrderData() {\n    let url = 'https://dev-african-roots.herokuapp.com/api/orders';\n    return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json',\n        },\n        withCredentials: false,\n        credentials: 'same-origin',\n        }).then(response => {\n            this.setState({\n                orderData: response.data\n              });\n        })\n    }\n\n    _getMealData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/meals';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n                mealData: response.data\n              });\n          })\n      }    \n\n      _generateOrderChartData(orderData,mealData){\n        \n        let breakfast = this._getOrderChartCatagoryAmount(orderData,mealData,\"Breakfasts\");\n        let lightMeal = this._getOrderChartCatagoryAmount(orderData,mealData,\"Light meals\");\n        let drink = this._getOrderChartCatagoryAmount(orderData,mealData,\"Drinks\");\n        let dessert = this._getOrderChartCatagoryAmount(orderData,mealData,\"Desserts\");\n\n        return {label:[\"Beakfasts\", \"Light Meals\", \"Drinks\", \"Desserts\"], \n                amount: [breakfast.amount,lightMeal.amount,drink.amount,dessert.amount],\n                price: [breakfast.price,lightMeal.price,drink.price,dessert.price], \n                colour:['#D1E902','#B4CF23','#D6D6D6','#F5F5F5']}\n\n\n    };\n\n    // _getCustomerCount(orderData) {\n\n    //     let current = null;\n    //     let count = 0;\n\n    //     for (var i=0; i < orderData.length; i++) {\n    //         if (Array.isArray(orderData[i].user_id)) {\n    //             if (orderData[i].user_id != current) {\n    //                 if (count > 0) {\n    //                     document.write(current + ' comes --> ' + count + ' times<br>');\n    //                 }\n    //                 current = orderData[i];\n    //                 count = 1;\n    //             } else {\n    //                 count++;\n    //             }\n    //         }\n    //     }\n    //     if (count > 0) {\n    //         document.write(current + ' comes --> ' + count + ' times');\n    //     }\n    // }\n\n    // _getOrderCount(orderData) {\n\n    //     let current = null;\n    //     let count = 0;\n\n    //     for (var i=0; i < orderData.length; i++) {\n    //         if (Array.isArray(orderData[i].created_at)) {\n    //             if (orderData[i].created_at != current) {\n    //                 if (count > 0) {\n    //                     document.write(current + ' comes --> ' + count + ' times<br>');\n    //                 }\n    //                 current = orderData[i].created_at;\n    //                 count = 1;\n    //             } else {\n    //                 count++;\n    //             }\n    //         }\n    //     }\n    //     if (count > 0) {\n    //         document.write(current + ' comes --> ' + count + ' times');\n    //     }\n    // }\n\n    _getOrderChartCatagoryAmount(orderData,mealData,key){\n\n        let data= {amount:0,price:0};\n\n        for (var i=0; i < orderData.length; i++) {\n            if (Array.isArray(orderData[i].meal_id)) {\n                for (var j=0; j < orderData[i].meal_id.length; j++) {\n                    for (var k=0; k < mealData.length; k++) {\n                        if (mealData[k]._id === orderData[i].meal_id[j]) {\n                            if (mealData[k].category === key) {\n                                data.amount = data.amount + 1;\n                                data.price = data.price + mealData[k].price_id;\n                                console.log()\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                for (var k=0; k < mealData.length; k++) {\n                    if (mealData[k]._id === orderData[i].meal_id) {\n                        if (mealData[k].category === key) {\n                            data.amount = data.amount + 1;\n                            data.price = data.price + mealData[k].price_id;\n                        }\n                    }\n                }\n            }\n\n        }\n\n        return data;\n    }\n\n    _getSalesChartData() {\n        //AJAX CALL\n        this.setState({\n            salesChartData: {\n                labels: [\n                    'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday',\n                    'Saturday', 'Sunday'\n                ],\n                datasets : [\n                    {\n                        label: 'Daily Sales',\n                        data: [\n                            5, 10, 4, 9, 15, 6, 8\n                        ],\n                        backgroundColor: [\n                            '#D1E902','#B4CF23','#D6D6D6','#F5F5F5',\n                            '#D1E902','#B4CF23','#D6D6D6'\n                        ],\n                    }\n                ],\n                options:{\n                    legend: {\n                        display: false\n                    },\n                    layout: {\n                        padding: {\n                            top: 15,\n                            bottom: 20\n                        }\n                    },\n                }\n            }\n        })\n    }\n\n    _getCustomerChartData() {\n        //AJAX CALL\n        this.setState({\n            customerChartData: {\n                labels: [\n                    'New', 'Returning'\n                ],\n                datasets : [\n                    {\n                        data: [\n                            4, 7\n                        ],\n                        backgroundColor: [\n                            '#D1E902','#B4CF23'\n                        ],\n                    }\n                ],\n                options:{\n                    legend: {\n                        display: false\n                    },\n                    layout: {\n                        padding: {\n                            top: 15,\n                            bottom: 20\n                        }\n                    },\n                }\n            }\n        })\n    }\n\n    _getProfitsChartData() {\n        //AJAX CALL\n        this.setState({\n            profitsChartData: {\n                labels: [\n                    'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday',\n                    'Saturday', 'Sunday'\n                ],\n                datasets : [\n                    {\n                        data: [\n                            800, 900, 1200, 750, 700, 1300, 1760\n                        ],\n                        backgroundColor: [\n                            '#D1E902','#B4CF23','#D6D6D6','#F5F5F5',\n                            '#D1E902','#B4CF23','#D6D6D6'\n                        ],\n                    }\n                ],\n                options:{\n                    legend: {\n                        display: false\n                    },\n                    layout: {\n                        padding: {\n                            top: 15,\n                            bottom: 20\n                        }\n                    },\n                }\n            }\n        })\n    }\n\n    render() {\n        return (\n        <div className=\"tab-pane active\" role=\"tabpanel\" id=\"tab-1\">\n            <div className=\"row\">\n                <div className=\"col-12 col-md-7 col-lg-9\">\n                    <div className=\"row\">\n                        <div className=\"col-12 col-lg-7\">\n                            <ProfitsChart  profitsChartData={this.state.profitsChartData}/>\n                        </div>\n                        <div className=\"col-12 col-lg-5\">\n                            {this.__showOrdersChart()}\n                        </div>\n                        <div className=\"col-12 col-lg-5\">\n                            <CustomersChart customerChartData={this.state.customerChartData}/>\n                        </div>\n                        <div className=\"col-12 col-lg-7\">\n                            <SalesChart salesChartData={this.state.salesChartData}/>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col\">\n                    <div className=\"chartContainer inSeason\">\n                        <div className=\"col\">\n                            <h5 className=\"chartHeadingSmall\">INGREDIENTS</h5>\n                            <h5 className=\"chartHeading\">What's in season</h5>\n                        </div>\n                        <div className=\"col inSeasonCol\">\n                            <>\n                                <SeasonalFoods />\n                            </>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        );\n    }\n\n    __showOrdersChart() {\n        let orderChartData = this._generateOrderChartData(this.state.orderData,this.state.mealData);\n        console.log(orderChartData.amount)\n        if (this.state.mealData.length > 0) {\n                return (\n                    <OrdersChart\n                      key={orderChartData.label}\n                      labels={orderChartData.label}\n                      data={orderChartData.amount}\n                      prices={orderChartData.price}\n                      colours={orderChartData.colour}\n                    />\n                );\n            } else {\n            return null;\n            }\n    }          \n\n}\n\nexport default Dashboard"]},"metadata":{},"sourceType":"module"}