{"ast":null,"code":"import _defineProperty from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/ClientUI/Home/CreateAccount.js\";\n// Create Account Component\nimport React from 'react';\nimport axios from \"axios\";\nimport $ from 'jquery';\n\nvar CreateAccount =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateAccount, _React$Component);\n\n  function CreateAccount() {\n    var _this;\n\n    _classCallCheck(this, CreateAccount);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateAccount).call(this));\n    _this.state = {\n      value: '',\n      error: 'none',\n      userData: []\n    };\n    _this._handleClick = _this._handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._handleChange = _this._handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._handleSubmit = _this._handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CreateAccount, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick() {\n      $('#loginModal').modal('show');\n      $('#signUpModal').modal('hide');\n    }\n  }, {\n    key: \"_getUserData\",\n    value: function _getUserData() {\n      var _this2 = this;\n\n      var url = 'https://dev-african-roots.herokuapp.com/api/admin/users';\n      return axios(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        credentials: 'same-origin'\n      }).then(function (response) {\n        _this2.setState({\n          userData: response.data\n        });\n\n        _this2._handleAccepted();\n      });\n    }\n  }, {\n    key: \"_handleChange\",\n    value: function _handleChange(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"_handleSubmit\",\n    value: function _handleSubmit(event) {\n      console.log(this.state);\n      event.preventDefault();\n\n      this._postData();\n    }\n  }, {\n    key: \"_handleDenied\",\n    value: function _handleDenied() {\n      this.setState({\n        error: 'denied'\n      });\n    }\n  }, {\n    key: \"_handleAccepted\",\n    value: function _handleAccepted() {\n      for (var i = 0; i < this.state.userData.length; i++) {\n        if (this.state.userData[i].email === this.state.email) {\n          sessionStorage.setItem('userId', this.state.userData[i]._id);\n          sessionStorage.setItem('userName', this.state.userData[i].name);\n        }\n      }\n\n      console.log('User Name: ' + sessionStorage.getItem('userName'));\n      this.props.loginAccepted();\n    }\n  }, {\n    key: \"_postData\",\n    value: function _postData() {\n      var _this3 = this;\n\n      var data = {\n        name: this.state.name,\n        email: this.state.email,\n        password: this.state.password,\n        role: '0'\n      };\n      console.log(data);\n      axios({\n        method: 'post',\n        url: 'https://dev-african-roots.herokuapp.com/api/register',\n        data: data,\n        config: {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      }).then(function (response) {\n        //handle success\n        console.log(\"yay!\");\n        console.log(response);\n      }).catch(function (error) {\n        //handle error\n        console.log(\"awww!\");\n\n        if (error.response.status === 422) {\n          _this3._handleDenied();\n        } else {\n          _this3._getUserData();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      var error = this.state.error;\n      var view;\n\n      if (error === 'denied') {\n        view = React.createElement(\"div\", {\n          className: \"row\",\n          style: {\n            marginBottom: '-30px',\n            marginTop: '25px',\n            marginLeft: '5px',\n            borderLeft: '2px solid #ff006a'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          style: {\n            color: 'white',\n            marginTop: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"This email is already registered\"));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"modal fade\",\n        role: \"dialog\",\n        tabIndex: \"-1\",\n        id: \"signUpModal\",\n        style: {\n          backgroundImage: \"url(assets/img/Asset%201.svg)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal-dialog\",\n        role: \"document\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal-body signUpModalBody\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this._handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"text-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Sign Up\"))), view, React.createElement(\"div\", {\n        className: \"row formRow loginFormRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col d-inline-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"la la-smile-o d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nickname\",\n        className: \"inputLogin\",\n        onChange: this._handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row formRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col d-inline-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"la la-archive d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Email\",\n        inputMode: \"email\",\n        className: \"inputLogin\",\n        onChange: this._handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row formRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col d-inline-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"la la-lock d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        className: \"inputLogin\",\n        onChange: this._handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row loginBtnRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-10 mx-auto loginBtnCol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"button\", (_React$createElement = {\n        className: \"btn btn-light btn-block btn-lg loginBtn\",\n        type: \"button\"\n      }, _defineProperty(_React$createElement, \"type\", \"submit\"), _defineProperty(_React$createElement, \"name\", \"submit\"), _defineProperty(_React$createElement, \"value\", \"submit\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement), \"Sign Up\")), React.createElement(\"div\", {\n        className: \"col-10 mx-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-outline-light btn-block btn-lg loginBtn\",\n        type: \"button\",\n        id: \"btnLoginSignUp\",\n        onClick: this._handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Login\"))))))));\n    }\n  }]);\n\n  return CreateAccount;\n}(React.Component);\n\nexport default CreateAccount;","map":{"version":3,"sources":["/Users/paulloots/Documents/OWI/3rd Year -2019/Development/term1/project/african-roots-client/src/components/ClientUI/Home/CreateAccount.js"],"names":["React","axios","$","CreateAccount","state","value","error","userData","_handleClick","bind","_handleChange","_handleSubmit","modal","url","method","mode","headers","withCredentials","credentials","then","response","setState","data","_handleAccepted","event","target","name","console","log","preventDefault","_postData","i","length","email","sessionStorage","setItem","_id","getItem","props","loginAccepted","password","role","config","catch","status","_handleDenied","_getUserData","view","marginBottom","marginTop","marginLeft","borderLeft","color","backgroundImage","Component"],"mappings":"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","sourcesContent":["// Create Account Component\n\nimport React from 'react'\nimport axios from \"axios\";\nimport $ from 'jquery'\n\nclass CreateAccount extends React.Component {\n    constructor() {\n        super();\n        this.state = {value: '',error:'none', userData: []};\n        this._handleClick = this._handleClick.bind(this);\n        this._handleChange = this._handleChange.bind(this);\n        this._handleSubmit = this._handleSubmit.bind(this);\n      }\n\n      componentDidMount() {\n      }\n\n      _handleClick(){\n        $('#loginModal').modal('show');\n        $('#signUpModal').modal('hide');\n      }\n\n      _getUserData() {\n        let url = 'https://dev-african-roots.herokuapp.com/api/admin/users';\n        return axios(url, {\n            method: 'GET',\n            mode: 'no-cors',\n            headers: {\n              'Access-Control-Allow-Origin': '*',\n              'Content-Type': 'application/json',\n            },\n            withCredentials: false,\n            credentials: 'same-origin',\n          }).then(response => {\n            this.setState({\n                userData: response.data\n            });\n            this._handleAccepted();\n          })\n      }\n\n      _handleChange(event) {\n        let target = event.target;\n        let value = target.value;\n        let name = target.name;\n    \n        this.setState({\n          [name]: value\n        });\n      }\n\n      _handleSubmit(event) {\n        console.log(this.state);\n        event.preventDefault();\n        this._postData();\n      }\n\n      _handleDenied() {\n        this.setState({\n            error: 'denied'\n        });\n      }\n\n      _handleAccepted() {\n        for (var i=0; i < this.state.userData.length; i++) {\n            if (this.state.userData[i].email === this.state.email) {\n                sessionStorage.setItem('userId', this.state.userData[i]._id);\n                sessionStorage.setItem('userName', this.state.userData[i].name);\n            }\n        }\n        console.log('User Name: '+sessionStorage.getItem('userName'))\n        this.props.loginAccepted();\n      }\n\n      _postData() {\n        let data = {name:this.state.name, email:this.state.email, password:this.state.password, role: '0'}\n        console.log(data);\n        axios({\n            method: 'post',\n            url: 'https://dev-african-roots.herokuapp.com/api/register',\n            data: data,\n            config: { headers: {'Content-Type': 'multipart/form-data' }}\n            })\n            .then(function (response) {\n                //handle success\n                console.log(\"yay!\")\n                console.log(response);\n            })\n            .catch(error => {\n                //handle error\n                console.log(\"awww!\")\n                if(error.response.status === 422){\n                    this._handleDenied();\n                } else {\n                    this._getUserData();\n                }\n            });\n      }\n\n      render() {\n        const error = this.state.error\n        let view;\n\n        if (error === 'denied') {\n            view = \n            <div className=\"row\" style={{marginBottom:'-30px',marginTop:'25px',marginLeft:'5px',borderLeft:'2px solid #ff006a'}}>\n                <h6  style={{color:'white',marginTop:'10px'}}>This email is already registered</h6>\n            </div>;\n        }\n        return (\n        <div className=\"modal fade\" role=\"dialog\" tabIndex=\"-1\" id=\"signUpModal\" style={{backgroundImage: \"url(assets/img/Asset%201.svg)\"}}>\n                <div className=\"modal-dialog\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-body signUpModalBody\">\n                        <form onSubmit={this._handleSubmit}>\n                            <div className=\"row\">\n                                <div className=\"col\">\n                                    <h4 className=\"text-uppercase\">Sign Up</h4>\n                                </div>\n                            </div>\n                            {view}\n                            <div className=\"row formRow loginFormRow\">\n                                <div className=\"col d-inline-flex\"><i className=\"la la-smile-o d-flex align-items-center\"></i>\n                                    {/*Name Input*/}\n                                    <input type=\"text\" name=\"name\" placeholder=\"Nickname\" className=\"inputLogin\" onChange={this._handleChange}></input>\n                                    {/*/Name Input*/}\n                                </div>\n                            </div>\n                            <div className=\"row formRow\">\n                                <div className=\"col d-inline-flex\"><i className=\"la la-archive d-flex align-items-center\"></i>\n                                    {/*Email Input*/}\n                                    <input type=\"email\" name=\"email\" placeholder=\"Email\" inputMode=\"email\" className=\"inputLogin\" onChange={this._handleChange}></input>\n                                    {/*/Email Input*/}\n                                </div>\n                            </div>\n                            <div className=\"row formRow\">\n                                <div className=\"col d-inline-flex\"><i className=\"la la-lock d-flex align-items-center\"></i>\n                                    {/*Password Input*/}\n                                    <input type=\"password\" name=\"password\" placeholder=\"Password\" className=\"inputLogin\" onChange={this._handleChange}></input>\n                                    {/*/Password Input*/}\n                                </div>\n                            </div>\n                            <div className=\"row loginBtnRow\">\n                                <div className=\"col-10 mx-auto loginBtnCol\">\n                                    {/*Sign Up Button*/}\n                                    <button className=\"btn btn-light btn-block btn-lg loginBtn\" type=\"button\" type=\"submit\" name=\"submit\" value=\"submit\">Sign Up</button>\n                                    {/*/Sign Up Button*/}\n                                </div>\n                                <div className=\"col-10 mx-auto\">\n                                    {/*Swich to Login Button*/}\n                                    <button className=\"btn btn-outline-light btn-block btn-lg loginBtn\" type=\"button\" id=\"btnLoginSignUp\" onClick={this._handleClick}>Login</button>\n                                    {/*/Swich to Login Button*/}\n                                </div>\n                            </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>      \n    );\n    }\n}\n\nexport default CreateAccount"]},"metadata":{},"sourceType":"module"}